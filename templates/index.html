<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>SEO Checker</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f5f5dc; /* Beige */
            margin: 0;
            padding: 0;
        }

        nav {
            background-color: #001f3f; /* Dunkelblau */
            color: beige;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 2rem;
        }

        nav img {
            height: 50px;
        }

        nav a {
            color: beige;
            margin-left: 1.5rem;
            text-decoration: none;
            font-weight: bold;
        }

        .container {
            max-width: 800px;
            margin: 2rem auto;
            background-color: white;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        textarea, input[type="text"] {
            width: 100%;
            padding: 1rem;
            border-radius: 8px;
            border: 1px solid #ccc;
            resize: vertical;
            font-family: monospace;
            margin-top: 0.5rem;
        }

        button {
            background-color: #001f3f;
            color: beige;
            border: none;
            padding: 0.8rem 1.5rem;
            font-size: 1rem;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 1rem;
        }

        table {
            width: 100%;
            margin-top: 2rem;
            border-collapse: collapse;
        }

        table, th, td {
            border: 1px solid #ccc;
        }

        th, td {
            padding: 0.75rem;
            text-align: left;
        }

        th {
            background-color: #001f3f;
            color: beige;
        }

        #robotsResult {
            margin-top: 1rem;
            font-weight: bold;
        }

        footer {
            margin-top: 4rem;
            padding: 2rem;
            background-color: #001f3f;
            color: beige;
            text-align: center;
        }
    </style>
</head>
<body>

    <!-- Navigation -->
    <nav>
        <img src="{{ url_for('static', filename='logo.png') }}" alt="Logo">
        <div>
            <a href="#leistungen">Leistungen</a>
            <a href="#ueber-uns">Über Uns</a>
            <a href="#kontakt">Kontakt</a>
        </div>
    </nav>

    <!-- Inhalt -->
    <div class="container">
        <h1>SEO-Check für deine Landingpage</h1>
        <p>Füge hier den HTML-Code deiner Seite ein:</p>
        <textarea id="htmlInput" placeholder="HTML-Code hier einfügen..."></textarea>
        <button onclick="analyzeSEO()">Analysieren</button>

        <table id="resultsTable" style="display:none;">
            <thead>
                <tr>
                    <th>SEO Element</th>
                    <th>Status</th>
                    <th>Details</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>

        <hr style="margin: 3rem 0;">

        <h2>robots.txt prüfen</h2>
        <p>Gib die vollständige URL deiner Website ein:</p>
        <input type="text" id="robotsUrl" placeholder="https://www.deineseite.de">
        <button onclick="checkRobotsTxt()">robots.txt prüfen</button>
        <div id="robotsResult"></div>
    </div>

    <!-- Footer -->
    <footer>
        &copy; {{ year }} Deine SEO Agentur – Alle Rechte vorbehalten.
    </footer>

    <!-- JS -->
    <script>
        async function analyzeSEO() {
            const html = document.getElementById("htmlInput").value;

            const response = await fetch("/check-seo", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ html: html })
            });

            const data = await response.json();
            const tbody = document.querySelector("#resultsTable tbody");
            tbody.innerHTML = "";

            for (const [key, value] of Object.entries(data)) {
                const row = `<tr>
                    <td>${key}</td>
                    <td>${value.Status}</td>
                    <td>${value.Details}</td>
                </tr>`;
                tbody.innerHTML += row;
            }

            document.getElementById("resultsTable").style.display = "table";
        }

        async function checkRobotsTxt() {
            const url = document.getElementById("robotsUrl").value;
            const resultDiv = document.getElementById("robotsResult");

            if (!url) {
                resultDiv.textContent = "Bitte eine gültige URL eingeben.";
                return;
            }

            try {
                const response = await fetch("/check-robots", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ url: url })
                });

                const data = await response.json();
                resultDiv.textContent = data.message || "Keine Daten erhalten.";
            } catch (error) {
                resultDiv.textContent = "Fehler beim Abrufen der robots.txt.";
            }
        }

        // Aktuelles Jahr im Footer einfügen
        document.querySelector("footer").innerHTML = document.querySelector("footer").innerHTML.replace("{{ year }}", new Date().getFullYear());
    </script>

</body>
</html>
